{% extends 'components/base.html.twig' %}
{% block title %}Search{% endblock %}
{% block body %}
    {{ include('components/header.html.twig') }}
    <div class="container mx-auto">
        <div class="flex flex-row justify-between items-center mt-8 mb-4">
            <div class="flex flex-row gap-1">
                <h1 class="font-semibold text-2xl">Sort By: </h1>
                <button class="bg-gray-700 font-semibold rounded-md py-2 px-4">Name</button>
                <button class="bg-gray-900 font-semibold rounded-md py-2 px-4">Rating</button>
                <button class="bg-gray-900 font-semibold rounded-md py-2 px-4">Release Date</button>
            </div>
            <div class="flex flex-row gap-1">
                <button class="flex flex-row items-center justify-center bg-gray-700 font-semibold rounded-md py-2 px-4">Descending
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 ml-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m0 0l6.75-6.75M12 19.5l-6.75-6.75" />
                    </svg>
                </button>
                <button class="flex flex-row items-center justify-center bg-gray-900 font-semibold rounded-md py-2 px-4">Ascending
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 ml-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 19.5v-15m0 0l-6.75 6.75M12 4.5l6.75 6.75" />
                    </svg>
                </button>
                <button class="flex flex-row items-center justify-center ml-5 bg-gray-900 font-semibold rounded-md py-2 px-4">Filters
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 ml-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                </button>
            </div>
        </div>
        <div id="moviesContainer" class="flex flex-row flex-wrap justify-center gap-2">
            {% for movie in movies %}
                <a href="{{ path('movie', {id: movie.getId()}) }}" class="flex flex-col w-56 my-1 hover:brightness-125 transition ease-in-out duration-200">
                    <img src="{{ baseImageUrl }}{{ movie.getCoverPhoto() }}" alt="Cover Photo"/>
                    <h1 class="font-bold text-xl">{{ movie.getTitle() }}</h1>
                </a>
            {% endfor %}
        </div>
        {% if total_pages > 1 %}
            <div class="container m-auto border-t flex flex-row justify-between text-gray-300 font-semibold my-5">
                <div class="flex flex-row gap-1 align-middle text-center border-t-2 border-transparent py-3 pr-1 hover:border-white hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
                    </svg>
                    <h2>Previous</h2>
                </div>

                <div class="flex flex-row align-middle">
                    {% if current_page > 5 %}
                        <a href="" class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">1</a>
                        <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ current_page//2 }}</a>
                        <a class="border-t-2 border-transparent p-3">...</a>
                        <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ current_page - 2 }}</a>
                        <a class="border-t-[3px] p-3 border-indigo-500 text-indigo-500">{{ current_page }}</a>
                        {% if current_page < total_pages - 1 %}
                            <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ current_page + 2 }}</a>
                        {% endif %}
                    {% else %}
                        {% for i in range(1, 5) %}
                            {% if i == current_page %}
                                <a class="border-t-[3px] p-3 border-indigo-500 text-indigo-500">{{ current_page }}</a>
                            {% else %}
                                <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ i }}</a>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    {% if current_page < total_pages - 5 %}
                        <a class="border-t-2 border-transparent p-3">...</a>
                        <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ total_pages // 4 * 3  }}</a>
                        <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ total_pages }}</a>
                    {% else %}
                        {% for i in range(current_page, current_page+5) %}
                            {% if i == current_page %}
                                <a class="border-t-[3px] p-3 border-indigo-500 text-indigo-500">{{ current_page }}</a>
                            {% else %}
                                <a class="border-t-2 border-transparent p-3 hover:border-white hover:text-white">{{ i }}</a>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </div>
                <div class="flex flex-row gap-1 align-middle text-center border-t-2 border-transparent py-3 pl-1 hover:border-white hover:text-white">
                    <h2>Next</h2>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3" />
                    </svg>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}